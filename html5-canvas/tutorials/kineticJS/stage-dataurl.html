<head>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.9.0.js">
    </script>
    <script>
    	// stage.toDataURL(function(dataUrl, mimeType, quality){
    	// 		do something with the data url
		// });
        window.onload = function() {
            var stage = new Kinetic.Stage({
                container: "container",
                width: 578,
                height: 200
            });
            var layer = new Kinetic.Layer();
            var rectX = stage.width / 2 - 50;
            var rectY = stage.height / 2 - 25;
 
            var box = new Kinetic.Rect({
                x: rectX,
                y: rectY,
                width: 100,
                height: 50,
                fill: "#00D2FF",
                stroke: "black",
                strokeWidth: 4,
                draggable: true
            });
 
            box.on("mouseover", function() {
                document.body.style.cursor = "pointer";
            });
            box.on("mouseout", function() {
                document.body.style.cursor = "default";
            });
 
            layer.add(box);
            stage.add(layer);
 
            document.getElementById("save").addEventListener("click", function() {
                stage.toDataURL(function(dataUrl) {
                    /*
                     * here you can do anything you like with the data url.
                     * In this tutorial we'll just open the url with the browser
                     * so that you can see the result as an image
                     */
                    window.open(dataUrl);
                });
            }, false);
        };
    </script>
</head>
<body onmousedown="return false;">
    <div id="container">
    </div>
    <div id="buttons">
        <button id="save">
            Save as image
        </button>
    </div>
</body>